WEBVTT

1
00:00:00.000 --> 00:00:02.669
<v Chinese>现在，我们将设置一些有趣的界面了</v>

2
00:00:02.669 --> 00:00:05.189
<v Chinese>到目前为止还都没介绍什么有趣的内容</v>

3
00:00:05.190 --> 00:00:07.740
<v Chinese>我们将构建这个视图</v>

4
00:00:07.740 --> 00:00:11.759
<v Chinese>相当于一个实时详情视图</v>

5
00:00:11.759 --> 00:00:13.349
<v Chinese>我们将从手机中获取信息</v>

6
00:00:13.349 --> 00:00:15.209
<v Chinese>并渲染该视图</v>

7
00:00:15.210 --> 00:00:16.620
<v Chinese>它会显示我们正朝着哪个方向前进</v>

8
00:00:16.620 --> 00:00:18.780
<v Chinese>海拔是多少，当前移动速度是多少</v>

9
00:00:18.780 --> 00:00:21.140
<v Chinese>所有这些信息都来自于手机</v>

10
00:00:21.140 --> 00:00:23.429
<v Chinese>因此，我们需要</v>

11
00:00:23.429 --> 00:00:26.300
<v Chinese>使用手机的 API 来获得这些信息</v>

12
00:00:26.300 --> 00:00:28.650
<v Chinese>顺便提醒下，如果你尝试在 Android 模拟器上跟着操作</v>

13
00:00:28.649 --> 00:00:31.664
<v Chinese>可能会因为某些原因而出现故障</v>

14
00:00:31.664 --> 00:00:34.490
<v Chinese>Android 模拟器不能实现我们要执行的操作</v>

15
00:00:34.490 --> 00:00:39.030
<v Chinese>但是如果你在实际设备上使用 Expo 应用，则一切正常</v>

16
00:00:39.030 --> 00:00:42.105
<v Chinese>因此请别使用 Android 模拟器，而是使用 Expo 应用</v>

17
00:00:42.104 --> 00:00:45.469
<v Chinese>或 iOS 模拟器。我们开始吧</v>

18
00:00:45.469 --> 00:00:47.640
<v Chinese>转到此处</v>

19
00:00:47.640 --> 00:00:51.369
<v Chinese>新建一个视图文件，叫做 Live.js</v>

20
00:00:51.369 --> 00:00:54.719
<v Chinese>暂时先导入</v>

21
00:00:54.719 --> 00:00:59.153
<v Chinese>react，{Component} </v>

22
00:00:59.154 --> 00:01:03.570
<v Chinese>然后导入 View、Text 以及 ActivityIndicator</v>

23
00:01:03.570 --> 00:01:07.459
<v Chinese>都来自于 react-native</v>

24
00:01:07.459 --> 00:01:13.034
<v Chinese>然后导出这个扩展自 component 的类</v>

25
00:01:13.034 --> 00:01:16.379
<v Chinese>设定此组件的状态</v>

26
00:01:16.379 --> 00:01:20.155
<v Chinese>包括坐标，暂时设为 null</v>

27
00:01:20.155 --> 00:01:22.945
<v Chinese>还包括 status，也设为 null</v>

28
00:01:22.944 --> 00:01:27.204
<v Chinese>以及 direction，设为空字符串</v>

29
00:01:27.204 --> 00:01:34.030
<v Chinese>我们可以从 this.state 上获取这些信息</v>

30
00:01:34.030 --> 00:01:37.140
<v Chinese>我们将获取几个不同的视图</v>

31
00:01:37.140 --> 00:01:41.310
<v Chinese>具体取决于你所获得的权限</v>

32
00:01:41.310 --> 00:01:45.564
<v Chinese>如果 status === null</v>

33
00:01:45.564 --> 00:01:48.495
<v Chinese>表示用户尚未授予任何权限</v>

34
00:01:48.495 --> 00:01:50.820
<v Chinese>依然保持默认状态</v>

35
00:01:50.819 --> 00:01:56.024
<v Chinese>则渲染 ActivityIndicator</v>

36
00:01:56.025 --> 00:01:59.160
<v Chinese>并将 marginTop 设为 30</v>

37
00:01:59.159 --> 00:02:02.729
<v Chinese>ActivityIndicator 中的内容只是表示正在加载的旋转图标</v>

38
00:02:02.730 --> 00:02:05.670
<v Chinese>你之前见过，它只是在渲染旋转图标</v>

39
00:02:05.670 --> 00:02:07.200
<v Chinese>仿佛在提示系统正在等待中</v>

40
00:02:07.200 --> 00:02:10.770
<v Chinese>如果 status === denied</v>

41
00:02:10.770 --> 00:02:14.880
<v Chinese>表示你请求了权限，但是遭到用户拒绝</v>

42
00:02:14.879 --> 00:02:22.764
<v Chinese>我们暂时渲染一个视图，在其中显示文本“Denied”</v>

43
00:02:22.764 --> 00:02:35.615
<v Chinese>然后我们将执行完全一样的操作</v>

44
00:02:35.615 --> 00:02:38.254
<v Chinese>但是这里的 denied</v>

45
00:02:38.254 --> 00:02:41.914
<v Chinese>将改为 undetermined</v>

46
00:02:41.914 --> 00:02:44.929
<v Chinese>当你在模拟器中操作时</v>

47
00:02:44.930 --> 00:02:46.790
<v Chinese>某些权限会比较卡顿</v>

48
00:02:46.789 --> 00:02:50.314
<v Chinese>因为我们没有在实际设备上操作</v>

49
00:02:50.314 --> 00:02:53.375
<v Chinese>但是可以实现最终目标</v>

50
00:02:53.375 --> 00:02:57.800
<v Chinese>最后，如果不是 denied 或 undetermined</v>

51
00:02:57.800 --> 00:03:00.020
<v Chinese>则表明授予了权限</v>

52
00:03:00.020 --> 00:03:01.909
<v Chinese>我们将</v>

53
00:03:01.909 --> 00:03:03.355
<v Chinese>渲染一个视图</v>

54
00:03:03.355 --> 00:03:05.329
<v Chinese>暂时</v>

55
00:03:05.330 --> 00:03:08.965
<v Chinese>我们将渲染几个文本组件</v>

56
00:03:08.965 --> 00:03:11.120
<v Chinese>暂时显示这个状态</v>

57
00:03:11.120 --> 00:03:13.849
<v Chinese>看起来不错</v>

58
00:03:13.849 --> 00:03:17.875
<v Chinese>我们将这个当做新的标签页添加进来</v>

59
00:03:17.875 --> 00:03:20.055
<v Chinese>转到 App.js</v>

60
00:03:20.055 --> 00:03:21.800
<v Chinese>首先需要导入该组件</v>

61
00:03:21.800 --> 00:03:25.915
<v Chinese>接着，转到 Tabs 中</v>

62
00:03:25.914 --> 00:03:29.204
<v Chinese>添加一个新的属性</v>

63
00:03:29.205 --> 00:03:30.615
<v Chinese>称之为 Live</v>

64
00:03:30.615 --> 00:03:32.425
<v Chinese>就像之前一样</v>

65
00:03:32.425 --> 00:03:36.210
<v Chinese>screen 设为 Live 组件</v>

66
00:03:36.210 --> 00:03:40.862
<v Chinese>添加一些导航选项</v>

67
00:03:40.862 --> 00:03:43.055
<v Chinese>将 tabBarLabel 设为 Live</v>

68
00:03:43.055 --> 00:03:45.230
<v Chinese>然后复制这段代码</v>

69
00:03:45.229 --> 00:03:49.129
<v Chinese>因为我们将使用 Ionicon 字体</v>

70
00:03:49.129 --> 00:03:56.305
<v Chinese>但是将 name 改为 ios-speedometer</v>

71
00:03:56.305 --> 00:03:58.835
<v Chinese>看看是否可行</v>

72
00:03:58.835 --> 00:04:01.180
<v Chinese>转到 Live</v>

73
00:04:01.180 --> 00:04:02.486
<v Chinese>注意，这里出现了旋转指示符</v>

74
00:04:02.485 --> 00:04:08.704
<v Chinese>因为当前 status 设为 null</v>

75
00:04:08.705 --> 00:04:11.705
<v Chinese>我们假设可行</v>

76
00:04:11.705 --> 00:04:13.670
<v Chinese>当然可以设为 denied</v>

77
00:04:13.669 --> 00:04:15.729
<v Chinese>现在应该能在这里看到 denied</v>

78
00:04:15.729 --> 00:04:17.327
<v Chinese>重新设为 null</v>

79
00:04:17.327 --> 00:04:20.409
<v Chinese>我们将在后续视频中继续完善这一部分</v>
